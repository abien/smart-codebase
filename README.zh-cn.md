# Smart-Codebase

[English](README.md) | [ç®€ä½“ä¸­æ–‡](README.zh-cn.md)

> **è®©ä½ çš„ OpenCode åœ¨å®Œæˆä»»åŠ¡æ—¶ï¼Œä¸æ–­å­¦ä¹ æˆé•¿ï¼Œå˜æˆä½ ç‹¬ä¸€æ— äºŒçš„èµ„æ·±é¡¹ç›®ä¸“å®¶ã€‚**

---

## ğŸ”¥ ä½ çš„ç—›ç‚¹

æ¯æ¬¡å¼€å§‹æ–°ä¼šè¯æ—¶ï¼ŒAI éƒ½ä»é›¶å¼€å§‹ã€‚å®ƒä¸è®°å¾—ï¼š
- ä½ ä¸ºä»€ä¹ˆé€‰æ‹©é‚£ä¸ªæ¶æ„ï¼Ÿ
- ä»£ç åº“ä¸­å­˜åœ¨å“ªäº›å‘ï¼Ÿ
- ä½ çš„å›¢é˜Ÿéµå¾ªä»€ä¹ˆæ¨¡å¼ï¼Ÿ
- ä½ ä»è°ƒè¯•é‚£ä¸ªæ£˜æ‰‹çš„ bug ä¸­å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ

**ä½ ä¸€éåˆä¸€éåœ°è§£é‡ŠåŒæ ·çš„äº‹æƒ…ã€‚**

## âœ¨ è§£å†³æ–¹æ¡ˆ

smart-codebase è‡ªåŠ¨ä»ä¼šè¯ä¸­æ•è·çŸ¥è¯†ï¼Œå¹¶ä½¿å…¶å¯ä¾›æœªæ¥ä¼šè¯ä½¿ç”¨ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         KNOWLEDGE CYCLE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    idle     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Session  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Extractor â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚  SKILL.md    â”‚  â”‚
â”‚   â”‚  Work    â”‚   15sec     â”‚    (AI)   â”‚  write  â”‚  (per module)â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                      â”‚         â”‚
â”‚                                   â”‚ update               â”‚         â”‚
â”‚                                   â–¼                      â”‚         â”‚
â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚         â”‚
â”‚                            â”‚ KNOWLEDGE.mdâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                            â”‚   (index)   â”‚     register            â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                   â”‚                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    inject   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   New    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  Injector   â”‚ â—„â”€â”€â”€â”€â”€â”€ â”‚  Session  â”‚   â”‚
â”‚   â”‚ Session  â”‚    hint     â”‚             â”‚  start  â”‚  Created  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚                                                           â”‚
â”‚        â”‚ reads                                                     â”‚
â”‚        â–¼                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚  .knowledge/KNOWLEDGE.md             â”‚                         â”‚
â”‚   â”‚  â””â”€â–º src/auth/.knowledge/SKILL.md    â”‚                         â”‚
â”‚   â”‚  â””â”€â–º src/api/.knowledge/SKILL.md     â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“– ç›®å½•

- [âš™ï¸ å·¥ä½œåŸç†](#ï¸-å·¥ä½œåŸç†)
- [ğŸ“¦ å®‰è£…](#-å®‰è£…)
- [ğŸ”§ å‘½ä»¤](#-å‘½ä»¤)
- [âš¡ é…ç½®](#-é…ç½®)
- [ğŸ“ æ–‡ä»¶ç»“æ„](#-æ–‡ä»¶ç»“æ„)
- [ğŸ› ï¸ å¼€å‘](#ï¸-å¼€å‘)

---

## âš™ï¸ å·¥ä½œåŸç†

1. **ä½ æ­£å¸¸å·¥ä½œ** - ç¼–è¾‘æ–‡ä»¶ã€è°ƒè¯•é—®é¢˜ã€åšå†³ç­–
2. **ä¼šè¯ç©ºé—²** - 15 ç§’æ— æ´»åŠ¨å
3. **æå–å™¨åˆ†æ** - æ£€æŸ¥å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ä»¥åŠä¸ºä»€ä¹ˆ
4. **çŸ¥è¯†è¢«æ•è·** - å­˜å‚¨åœ¨æ¯ä¸ªæ¨¡å—çš„ `.knowledge/SKILL.md` ä¸­
5. **ç´¢å¼•æ›´æ–°** - å…¨å±€ `.knowledge/KNOWLEDGE.md` è·Ÿè¸ªæ‰€æœ‰æŠ€èƒ½
6. **ä¸‹æ¬¡ä¼šè¯å¼€å§‹** - é¦–å…ˆè¯»å– KNOWLEDGE.mdï¼Œæ‰¾åˆ°ç›¸å…³æŠ€èƒ½

**æ’ä»¶å¸®ä½ æ²‰æ·€çŸ¥è¯†ï¼Œä½ åªç®¡é­ç­– AI å†™ä»£ç ã€‚**

---

## ğŸ“¦ å®‰è£…

è¿›å…¥ `~/.config/opencode` ç›®å½•ï¼š

```bash
# ä½¿ç”¨ bun
bun add smart-codebase

# æˆ–ä½¿ç”¨ npm
npm install smart-codebase
```

æ·»åŠ åˆ°ä½ çš„ `opencode.json`ï¼š

```json
{
  "plugin": ["smart-codebase"]
}
```

---

## âš¡ å‘½ä»¤

| å‘½ä»¤ | æè¿° |
|------|------|
| `/sc-status` | æ˜¾ç¤ºçŸ¥è¯†åº“çŠ¶æ€ |
| `/sc-extract` | æ‰‹åŠ¨è§¦å‘çŸ¥è¯†æ²‰æ·€ |
| `/sc-rebuild-index` | ä»æ‰€æœ‰ SKILL.md æ–‡ä»¶é‡å»º `.knowledge/KNOWLEDGE.md` |

---

## âš™ï¸ é…ç½®

é»˜è®¤æ— é¡»é…ç½®ï¼Œå¦‚éœ€æ”¹å˜é»˜è®¤é…ç½®ï¼Œåˆ›å»º `~/.config/opencode/smart-codebase.json`ï¼ˆæˆ– `.jsonc`ï¼‰ï¼š

```jsonc
{
  // ç¤ºä¾‹é…ç½®
  "enabled": true,
  "debounceMs": 30000,
  "autoExtract": true,
  "autoInject": true,
  "disabledCommands": ["sc-rebuild-index"]
}
```

| é€‰é¡¹ | é»˜è®¤å€¼ | æè¿° |
|------|--------|------|
| `enabled` | `true` | å®Œå…¨å¯ç”¨/ç¦ç”¨æ’ä»¶ |
| `debounceMs` | `15000` | ä¼šè¯ç©ºé—²åç­‰å¾…å¤šä¹…ï¼ˆæ¯«ç§’ï¼‰æ‰æå– |
| `autoExtract` | `true` | ç©ºé—²æ—¶è‡ªåŠ¨æå–çŸ¥è¯† |
| `autoInject` | `true` | ä¼šè¯å¼€å§‹æ—¶æ³¨å…¥çŸ¥è¯†æç¤º |
| `disabledCommands` | `[]` | è¦ç¦ç”¨çš„å‘½ä»¤ï¼Œå¦‚ `["sc-rebuild-index"]` |

---

## ğŸ“ æ–‡ä»¶ç»“æ„ç¤ºä¾‹

```
project/
â”œâ”€â”€ .knowledge/
â”‚   â””â”€â”€ KNOWLEDGE.md              # å…¨å±€ç´¢å¼•
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ .knowledge/
â”‚   â”‚   â”‚   â””â”€â”€ SKILL.md          # è®¤è¯æ¨¡å—çŸ¥è¯†
â”‚   â”‚   â”œâ”€â”€ session.ts
â”‚   â”‚   â””â”€â”€ jwt.ts
â”‚   â”‚
â”‚   â””â”€â”€ payments/
â”‚       â”œâ”€â”€ .knowledge/
â”‚       â”‚   â””â”€â”€ SKILL.md          # æ”¯ä»˜æ¨¡å—çŸ¥è¯†
â”‚       â””â”€â”€ stripe.ts
```

---

## ğŸ› ï¸ å¼€å‘

```bash
# å®‰è£…ä¾èµ–
bun install

# æ„å»º
bun run build

# ç±»å‹æ£€æŸ¥
bun run typecheck
```

---

## ğŸ“„ è®¸å¯è¯

[Apache-2.0](LICENSE)
